:root{ --brand:#18BC9C; --ink:#2C3E50; --sidebar-width:260px; --sidebar-width-collapsed:72px; }
*{box-sizing:border-box}

body.layout{ 
    font-family:'Poppins',sans-serif; 
    margin:0; 
    color:dimgray; 
    display:flex; 
    min-height:100dvh;
    position: relative; 
    z-index: 1;
}

.background-animation {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    z-index: -1;
    overflow: hidden;
    background: linear-gradient(-45deg, #f0f2f5, #e8f8f5, #f9fbfd, #edf1f4);
    background-size: 400% 400%;
    animation: gradientBG 20s ease infinite;
}
@keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}
.background-animation span {
    position: absolute;
    display: block;
    width: 20px;
    height: 20px;
    bottom: -150px;
    background-color: rgba(255, 255, 255, 0.5);
    border-radius: 50%;
    animation: float 25s infinite;
    opacity: 0;
}
.background-animation span:nth-child(1) { left: 25%; width: 80px; height: 80px; animation-delay: 0s; animation-duration: 18s; }
.background-animation span:nth-child(2) { left: 10%; width: 20px; height: 20px; animation-delay: 2s; animation-duration: 12s; }
.background-animation span:nth-child(3) { left: 70%; width: 20px; height: 20px; animation-delay: 4s; }
.background-animation span:nth-child(4) { left: 40%; width: 60px; height: 60px; animation-delay: 0s; animation-duration: 18s; }
.background-animation span:nth-child(5) { left: 65%; width: 20px; height: 20px; animation-delay: 0s; }
.background-animation span:nth-child(6) { left: 75%; width: 110px; height: 110px; animation-delay: 3s; background-color: rgba(24, 188, 156, 0.1); }
.background-animation span:nth-child(7) { left: 35%; width: 150px; height: 150px; animation-delay: 7s; background-color: rgba(24, 188, 156, 0.1); }
.background-animation span:nth-child(8) { left: 50%; width: 25px; height: 25px; animation-delay: 15s; animation-duration: 45s; }
.background-animation span:nth-child(9) { left: 20%; width: 15px; height: 15px; animation-delay: 2s; animation-duration: 35s; }
.background-animation span:nth-child(10) { left: 85%; width: 150px; height: 150px; animation-delay: 0s; animation-duration: 22s; background-color: rgba(24, 188, 156, 0.1); }
@keyframes float { 0% { transform: translateY(0) rotate(0deg); opacity: 0; } 20% { opacity: 1; } 100% { transform: translateY(-1000px) rotate(720deg); opacity: 0; } }

.sidebar{ width:var(--sidebar-width); background:linear-gradient(180deg,#18BC9C 0%,#2C3E50 100%); color:#fff; display:flex; flex-direction:column; padding:1rem .9rem 1.25rem; position:sticky; top:0; height:100dvh; z-index:10; transition:width .25s ease; }
.sidebar.collapsed{ width:var(--sidebar-width-collapsed); }
.sidebar-header .brand{ display:inline-flex; align-items:center; gap:.5rem; font-weight:700; font-size:1.1rem; }
.sidebar.collapsed .sidebar-header .brand { display: none; }
.collapse-toggle{ border:none; background:rgba(255,255,255,.12); color:#fff; width:36px; height:36px; border-radius:10px; cursor:pointer; display:inline-grid; place-items:center; }    .sidebar-close{ display:none; }
.sidebar-nav ul{ list-style:none; padding:0; margin:0; flex-grow:1; }
.sidebar-nav li a{ display:flex; align-items:center; gap:.9rem; color:rgba(255,255,255,.95); text-decoration:none; padding:.75rem .8rem; border-radius:12px; margin-bottom:.35rem; transition:.2s; cursor:pointer; }
.sidebar-nav li a:hover,.sidebar-nav li a.active{ background:rgba(255,255,255,.12); color:#fff; }
.sidebar.collapsed .sidebar-nav .label{ display:none; }
.sidebar-footer{ margin-top:auto; display:flex; align-items:center; gap:.75rem; background:rgba(0,0,0,.2); padding:.8rem; border-radius:12px; }    .sidebar-footer .avatar{ width:40px; height:40px; border-radius:50%; background:#18BC9C; display:grid; place-items:center; min-width:40px; font-weight:600; font-size:1.1rem; padding-bottom:2px; }
.sidebar.collapsed .sidebar-footer .user-info{ display:none; }
.sidebar.collapsed .sidebar-footer { background: none; padding: 1.25rem 0; border-radius: 0; justify-content: center; }
.sidebar.collapsed .sidebar-footer .rename-btn-style { display: none; }
.sidebar-footer .rename-btn-style { background: transparent; border: none; color: rgba(255, 255, 255, 0.9); cursor: pointer; font-size: 1.1rem; padding: 0; margin-left: auto; transition: color 0.2s; }
.sidebar-footer .rename-btn-style:hover { color: #fff; }

.main-content{ flex:1; padding:1.25rem 2rem 2rem; position:relative; background: transparent; }
.topbar{ display:flex; align-items:center; justify-content:space-between; gap:1rem; margin-top:.75rem; }
.menu-toggle-btn{ background:transparent; border:none; font-size:1.4rem; cursor:pointer; color:#2C3E50; padding:.25rem; display:none; }
.right-actions{ display:flex; align-items:center; gap:.75rem; margin-left:auto; flex-wrap:wrap; }
.filter-controls{ display:flex; background:rgba(255,255,255,0.6); backdrop-filter: blur(5px); border: 1px solid rgba(255,255,255,0.8); border-radius:12px; padding:.3rem; }
.filter-btn{ background:transparent; border:none; padding:.5rem 1rem; border-radius:8px; cursor:pointer; color:slategray; font-weight:500; transition:.2s; display:flex; align-items:center; gap:.5rem; }
.filter-btn.active{ background:#fff; color:#000; box-shadow:0 2px 10px rgba(0,0,0,.1); }
.ghost-btn{ background:rgba(255,255,255,0.5); backdrop-filter: blur(5px); border:1px dashed var(--brand); color:var(--brand); padding:.55rem 1rem; border-radius:8px; cursor:pointer; font-weight:500; display:inline-flex; align-items:center; gap:.5rem; }
.add-btn{ background:var(--brand); color:#fff; padding:.7rem 1.2rem; border:none; border-radius:8px; cursor:pointer; font-weight:500; display:inline-flex; align-items:center; gap:.5rem; transition:.25s; }
.add-btn:hover{ transform:translateY(-1px); box-shadow:0 10px 20px rgba(24,188,156,.3); }

/* NEW: Style for time filter dropdown */
.topbar-select {
    padding: .55rem 1rem;
    border: 1px solid #ddd;
    border-radius: 8px;
    background: #fff;
    font-family: inherit;
    font-weight: 500;
    color: slategray;
    height: 38px; /* Match button height */
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23888' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 0.7rem center;
    background-size: 1em;
    padding-right: 2.5rem; /* Make space for arrow */
}
#time-filter-group {
    margin-left: 0.75rem; 
}

/* NEW: Hide mobile filter button on desktop */
#mobile-filter-btn {
    display: none;
}

.header{ display:block; margin-top:.75rem; margin-bottom:1.25rem; }
.header-title h1{ margin:0; font-size:1.8rem; color:#000; }
.header-title p{ margin:.35rem 0 0; color:slategray; }
.cards-container{ display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:1.25rem; margin-bottom:1.5rem; }
.stat-card{ background:#fff; padding:1.25rem; border-radius:12px; box-shadow:0 4px 20px rgba(0,0,0,.05); display:flex; align-items:center; transition:box-shadow .25s,transform .25s; }
.stat-card:hover{ box-shadow: 0 0 12px var(--brand), 0 0 24px rgba(24, 188, 156, 0.4); transform:translateY(-2px); }
.stat-card .icon{ font-size:1.4rem; padding:.9rem; border-radius:50%; margin-right:1rem; }
.stat-card .icon.income{ background:#e8f8f5; color:#1abc9c; } 
.stat-card .icon.dollar{ background:#eafaf1; color:#2ecc71; }
.stat-card .icon.calendar{ background:#eaf1fa; color:#3498db; }
.stat-card .icon.transactions{ background:#fceeea; color:#e67e22; }
.stat-card .icon.spent{ background:#f9eafc; color:#8e44ad; }
.stat-card .info p{ margin:0; color:slategray; font-size:.9rem; }
.stat-card .info h3{ margin:0; font-size:1.4rem; color:#000; }
.charts-container{ display:grid; grid-template-columns:2fr 1fr; gap:1.25rem; margin-bottom:1.5rem; }
.card{ background:#fff; padding:1.25rem; border-radius:12px; box-shadow:0 4px 20px rgba(0,0,0,.05); transition:box-shadow .25s; }
.card:hover{ box-shadow: 0 0 12px rgba(44, 62, 80, 0.2), 0 0 24px rgba(44, 62, 80, 0.1); }
.chart-card{ height:400px; display:flex; flex-direction:column; position:relative; padding:1rem; }
.chart-card canvas{ flex-grow:1; width:100%!important; height:100%!important; max-height:320px; object-fit:contain; }
.card h3{ margin:0 0 1rem 0; color:#000; }
.lists-container{ display:grid; grid-template-columns:1fr 1fr; gap:1.25rem; }
.recent-expenses ul, .upcoming-payments ul{ list-style:none; padding:0; margin:0; } 
.recent-expenses li, .upcoming-payments li{ display:flex; justify-content:space-between; align-items:center; padding:1rem 0; border-bottom:1px solid #eee; } 
.recent-expenses li:last-child, .upcoming-payments li:last-child{ border:none; } 
.payment-item-info p, .expense-item-info p{ margin:0; color:slategray; font-size:.9rem; } 
.payment-item-info h4, .expense-item-info h4{ margin:0; font-weight:500; color:#000; } 
.payment-item-amount, .expense-item-amount{ font-weight:600; font-size:1.05rem; color:#000; display:flex; align-items:center; gap:0.5rem; } 
.expense-category{ padding:.2rem .6rem; border-radius:6px; font-size:.8rem; color:#fff; margin-left:.5rem; }
.food{ background:orange; } .education{ background:purple; } .entertainment{ background:red; } .travel{ background:blue; } .shopping{ background:green; }

/* NEW: View animation */
.view{ display:none; animation: fadeInView 0.4s ease; } 
.view.active{ display:block; }
@keyframes fadeInView {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

#home-view.active { display: flex; flex-direction: column; align-items: center; width: 100%; }

#add-expense-form{ max-width:800px; } .form-group{ margin-bottom:1.25rem; } .form-section{ display:grid; grid-template-columns:1fr 1fr; gap:1.25rem; }
#add-expense-form label, #edit-expense-form label { display:block; margin-bottom:.5rem; font-weight:500; color:#000; }
#add-expense-form input,#add-expense-form select,#add-expense-form textarea,
#edit-expense-form input,#edit-expense-form select,#edit-expense-form textarea { width:100%; padding:.75rem; border:1px solid #ddd; border-radius:8px; box-sizing:border-box; font-family:'Poppins',sans-serif; background:#fff; transition: border-color 0.2s, box-shadow 0.2s; }

/* NEW: Form input focus style */
#add-expense-form input:focus,#add-expense-form select:focus,#add-expense-form textarea:focus,
#edit-expense-form input:focus,#edit-expense-form select:focus,#edit-expense-form textarea:focus,
.modal-body input:focus, .modal-body select:focus {
    border-color: var(--brand);
    box-shadow: 0 0 0 3px rgba(24, 188, 156, 0.2);
    outline: none;
}

#add-expense-form textarea, #edit-expense-form textarea { resize:vertical; min-height:80px; }
.expense-type-selector{ display:flex; gap:1rem; margin-bottom:1.25rem; }
.type-box{ flex:1; padding:1rem; border:1px solid #ddd; border-radius:8px; text-align:center; cursor:pointer; transition:.2s; background:#fff; }
.type-box.selected{ border-color:var(--brand); background:#f0faf8; box-shadow:0 0 0 2px var(--brand); }
.type-box i{ display:block; margin-bottom:.5rem; font-size:1.2rem; }
#add-expense-form .form-actions, #edit-expense-form .form-actions { display:flex; justify-content:flex-end; gap:1rem; margin-top:1.5rem; }
#add-expense-form button, #edit-expense-form button { padding:.75rem 1.5rem; border-radius:8px; border:none; cursor:pointer; font-weight:500; }
#add-expense-form .save-btn, #edit-expense-form .save-btn { background:var(--brand); color:#fff; }
#add-expense-form .cancel-btn, #edit-expense-form .cancel-btn { background:#ecf0f1; color:slategray; }
.table-container{ overflow-x:auto; }
.expenses-table{ width:100%; border-collapse:collapse; margin-top:1rem; }
.expenses-table th,.expenses-table td{ padding:1rem; text-align:left; border-bottom:1px solid #eee; }
.expenses-table th{ font-weight:600; color:#000; }
.expenses-table tbody tr:hover{ background:#f9f9f9; }
.overlay{ position:fixed; inset:0; background:rgba(0,0,0,.5); z-index:9; opacity:0; visibility:hidden; transition:opacity .25s, visibility .25s; }
.overlay.active{ opacity:1; visibility:visible; }

/* UPDATED: Budget Banner Styles */
.budget-banner{ 
    background:#fff3cd; 
    color:#664d03; 
    border:1px solid #ffecb5; 
    padding: 0.75rem 1rem; 
    border-radius:10px; 
    margin-bottom:1rem; 
    display: block; /* Changed from flex */
}
.budget-banner.hidden{ display:none; }
.budget-banner-summary {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}
.budget-banner-toggle {
    margin-left: auto;
    background: rgba(0,0,0,0.05);
    border: none;
    padding: 0.25rem 0.75rem;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 500;
    color: #664d03;
    font-size: 0.85rem;
}
.budget-banner-toggle i {
    margin-left: 0.25rem;
    transition: transform 0.2s;
}
.budget-banner-toggle.open i {
    transform: rotate(180deg);
}
.budget-banner-details {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
    padding-left: 1.75rem; /* Align with text */
    margin-top: 0;
}
.budget-banner-details.open {
    max-height: 200px; /* Allow space to expand */
    margin-top: 0.75rem;
}
.budget-banner-details ul {
    margin: 0;
    padding: 0;
    list-style-type: disc;
    padding-left: 1.25rem;
}
.budget-banner-details li {
    font-size: 0.9rem;
    margin-bottom: 0.25rem;
}


.home-hero { width: 100%; max-width: 1000px; text-align: center; padding: 3rem 1.5rem 2rem; margin-bottom: 2rem; background: rgba(255,255,255,0.7); backdrop-filter: blur(10px); border-radius: 20px; box-shadow: 0 8px 32px 0 rgba(44, 62, 80, 0.1); border: 1px solid rgba(255, 255, 255, 0.9); }
.home-hero .hero-icon { font-size: 2.5rem; color: var(--brand); margin-bottom: 1rem; animation: bounceIcon 1.5s ease-in-out infinite; }
@keyframes bounceIcon { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
.home-hero h2 { margin: 0 0 .75rem 0; font-size: 2.8rem; color: var(--ink); font-weight: 700; } 
.home-hero h2 span { color: var(--brand); }
.home-hero .lead { font-size: 1.1rem; color: slategray; max-width: 700px; margin: 0 auto 1.5rem auto; }
.btn.btn-lg { padding: 0.8rem 2rem; font-size: 1.1rem; font-weight: 600; }
.home-summary { width: 100%; max-width: 1000px; margin-bottom: 2rem; }
.home-features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; width: 100%; max-width: 1000px; margin-bottom: 2rem; }
.feature-card { background: #fff; padding: 2rem 1.5rem; border-radius: 12px; text-align: center; box-shadow: 0 4px 20px rgba(0,0,0,.05); transition: box-shadow .25s,transform .25s; }
.feature-card:hover { transform: translateY(-5px); box-shadow: 0 0 12px var(--brand), 0 0 24px rgba(24, 188, 156, 0.4); }
.feature-card i { font-size: 2rem; color: var(--brand); margin-bottom: 1rem; }
.feature-card h3 { font-size: 1.25rem; color: var(--ink); margin-bottom: 0.5rem; }
.feature-card p { margin: 0; font-size: 0.95rem; color: slategray; }

.home-guide-box {
    width: 100%;
    max-width: 1000px;
    background: rgba(255,255,255,0.8);
    backdrop-filter: blur(10px);
    padding: 1.5rem 2rem;
    border-radius: 16px;
    border: 1px solid rgba(255,255,255,0.9);
    box-shadow: 0 4px 20px rgba(0,0,0,.05);
    display: flex;
    align-items: center;
    gap: 1.5rem;
    margin-bottom: 2.5rem; 
}
.home-guide-box .guide-icon {
    font-size: 2rem;
    color: var(--brand);
    background: #e8f8f5;
    width: 60px;
    height: 60px;
    display: grid;
    place-items: center;
    border-radius: 50%;
    flex-shrink: 0;
}
.home-guide-box h3 { margin: 0 0 0.5rem 0; color: var(--ink); }
.home-guide-box p { margin: 0; color: slategray; font-size: 0.95rem; line-height: 1.5; }
.hero-actions { display: flex; gap: 1rem; justify-content: center; margin-top: 1.5rem; }


.modal{ 
    position:fixed; 
    inset:0; 
    display:grid; 
    place-items:center; 
    background:rgba(0,0,0,.45); 
    z-index:1050; /* FIX APPLIED: Increased from 20 to 1050 */
    opacity:0; 
    visibility:hidden; 
    transition:opacity .25s, visibility .25s; 
    overflow-y: auto; 
}
#welcome-modal { background: #f4f7fa; }
#welcome-modal.show { opacity: 1; visibility: visible; background: #f4f7fa; }
.modal.show{ opacity:1; visibility:visible; }
.modal-dialog{ width:min(520px,92vw); background:#fff; border-radius:14px; padding:1rem 1rem 1.25rem; box-shadow:0 30px 80px rgba(0,0,0,.25); transform:translateY(20px) scale(.98); transition:transform .25s; position:relative; margin: 2rem auto; }
.modal.show .modal-dialog{ transform:translateY(0) scale(1); }
.modal-header h3{ margin:.25rem 0 .25rem; color:#000; }
.modal-subtitle{ margin:0; color:slategray; }
.modal-body .form-group{ margin-block:.9rem; }
.modal-body input[type="text"], .modal-body input[type="number"], .modal-body input[type="date"], .modal-body select { width:100%; padding:.75rem; border:1px solid #ddd; border-radius:10px; font-family:inherit; }
.modal-actions{ display:flex; gap:.75rem; justify-content:flex-end; margin-top:1rem; }
.btn{ padding:.75rem 1.2rem; border:none; border-radius:10px; cursor:pointer; font-weight:600; }
.btn.primary{ background:var(--brand); color:#fff; }
.btn.secondary{ background:#ecf0f1; color:#333; }
.btn.danger{ background:#e74c3c; color:#fff; }
.modal-close{ position:absolute; right:.75rem; top:.75rem; width:36px; height:36px; border:none; border-radius:10px; background:#f1f2f6; color:#333; cursor:pointer; display:grid; place-items:center; }
.delete-action-btn, .edit-action-btn { background: none; border: none; color: #333; cursor: pointer; font-size: 1.1rem; padding: 0; margin-left: 10px; }
.delete-action-btn { color: #e74c3c; }
.edit-action-btn { color: #3498db; }
.table-img-icon-group { display: flex; align-items: center; gap: 8px; }
.table-view-img-btn { color: var(--brand); cursor: pointer; font-size: 1.1rem; transition: transform 0.2s; }
.table-view-img-btn:hover { transform: scale(1.2); }
.table-edit-img-btn { color: slategray; cursor: pointer; font-size: 0.9rem; transition: color 0.2s; }
.table-edit-img-btn:hover { color: var(--ink); }
.table-no-img { color: #ddd; }
.bill-gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 1rem; padding-top: 1rem; }
.bill-card { background: #fff; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05); position: relative; cursor: pointer; transition: box-shadow .25s,transform .25s; }
.bill-card:hover { transform: translateY(-2px); box-shadow: 0 0 10px var(--brand), 0 0 20px rgba(24, 188, 156, 0.5); }
.bill-card img { width: 100%; height: 150px; object-fit: cover; display: block; }
.bill-card p { margin: 0; padding: .5rem; font-size: .8rem; color: slategray; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
#photo-modal { z-index: 1060 !important; } /* FIX APPLIED: Increased from 30 to 1060 */
#photo-modal .modal-dialog { width: min(80vw, 800px); background: #000; padding: 0; }
#photo-modal .modal-dialog img { display: block; max-width: 100%; max-height: 80vh; object-fit: contain; margin: auto; }
#photo-modal .modal-close { position: absolute; right: -1rem; top: -1rem; background: rgba(255, 255, 255, 0.8); color: #000; z-index: 31; width: 40px; height: 40px; border-radius: 50%; }
.hidden { display: none !important; }
.upcoming-payments-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
.payment-action-btn { background: none; border: none; color: #333; cursor: pointer; font-size: 1.1rem; transition: color 0.2s; }
.payment-action-btn.done-btn { color: #2ecc71; }
.payment-action-btn.delete-payment-btn { color: #e74c3c; margin-left: 0.25rem; }
.payment-action-btn:hover { color: #555; }
#edit-bill-photo-preview { width: 100%; max-width: 200px; height: auto; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 0.75rem; cursor: pointer; }
.photo-actions { display: flex; gap: 0.5rem; }
.photo-actions .btn { padding: 0.5rem 1rem; font-size: 0.9rem; }
.form-note { font-size: 0.85rem; color: slategray; margin: 0.25rem 0 0 0; }
@keyframes fadeUp{ from{opacity:0; transform:translateY(12px);} to{opacity:1; transform:translateY(0);} }
.fade-in-up{ opacity:0; animation:fadeUp .5s ease forwards; animation-delay:var(--delay,.05s); }
.card-pop{ opacity:0; transform:translateY(10px) scale(.98); animation:fadeUp .5s ease forwards; animation-delay:var(--delay,.1s); }

/* ==============================================
    NEW MOBILE & RESPONSIVE STYLES START
==============================================
*/

/* --- Base Mobile Nav (Hidden on Desktop) --- */
.mobile-bottom-nav {
    display: none; /* Hidden by default */
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 70px;
    background: #ffffff;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    z-index: 100;
    align-items: stretch;
}
.mobile-nav-link {
    flex: 1; /* All items share space equally */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    color: slategray;
    font-size: 0.75rem;
    gap: 4px;
    transition: color 0.2s;
    position: relative;
    padding: 0.5rem 0.25rem;
    min-width: 0; /* Allows flex items to shrink */
}
.mobile-nav-link i {
    font-size: 1.2rem;
}
.mobile-nav-link.active {
    color: var(--brand);
}
/* FIX: Truncate text to prevent overlap */
.mobile-nav-link span {
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    width: 90%; /* Prevent touching edges */
    text-align: center;
    font-size: 0.7rem; /* Smaller text */
}

/* FIX: Floating Action Button (FAB) for Add Expense */
.mobile-nav-link.add-expense-fab {
    flex-grow: 0; /* Don't grow */
    flex-shrink: 0; /* Don't shrink */
    flex-basis: 64px; /* Fixed width */
    height: 64px;
    background: var(--brand);
    color: white;
    border-radius: 50%;
    transform: translateY(-28px);
    box-shadow: 0 4px 15px rgba(24, 188, 156, 0.4);
    border: 3px solid white;
    font-size: 1.5rem;
    /* Remove padding and min-width */
    padding: 0;
    min-width: auto;
}
.mobile-nav-link.add-expense-fab i {
    font-size: 1.5rem;
    transform: translateY(1px);
}
.mobile-nav-link.add-expense-fab span {
    display: none; /* No text for FAB */
}

/* --- Responsive Media Queries --- */

/* --- Tablet & Large Phone (992px) --- */
@media (max-width:992px){
  body.layout {
      padding-bottom: 70px; /* Space for bottom nav */
  }
  
  .sidebar{ display: none; }
  .menu-toggle-btn{ display:none; }
  
  .mobile-bottom-nav {
      display: flex;
  }
  
  .main-content{ padding: 1rem 1rem 1.5rem 1rem; }
  
  .right-actions {
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5rem;
      width: 100%;
  }

  /* UPDATED: Hide original filter group */
  #filter-controls-group {
      display: none !important;
  }

  .filter-btn {
      padding: 0.4rem 0.8rem;
      font-size: 0.9rem;
  }
  /* NEW: Make time filter and action buttons wrap */
  #time-filter-group {
      margin-left: 0;
      margin-bottom: 0.5rem;
      flex-basis: 100%;
      display: block; /* UPDATED: Removed !important */
  }
  .topbar-select {
      width: 100%;
      height: 40px;
  }
  .topbar-actions-group {
      flex-grow: 1;
      display: flex;
      justify-content: space-around;
      gap: 0.5rem;
      width: 100%;
  }

  /* NEW: Show mobile filter button */
  #mobile-filter-btn {
      display: inline-flex;
      flex-grow: 1;
      min-width: 40px;
      padding: 0.5rem;
      height: 40px;
      font-size: 1rem;
      justify-content: center;
  }
  #mobile-filter-btn span {
      display: none;
  }
  #mobile-filter-btn i {
      margin-right: 0;
  }


  /* NEW: Shrink buttons to icons on mobile */
  .topbar-actions-group .ghost-btn span,
  .topbar-actions-group .add-btn span {
      display: none; /* Hide text */
  }
  .topbar-actions-group .ghost-btn i,
  .topbar-actions-group .add-btn i {
      margin-right: 0; /* Remove icon margin */
  }
  .topbar-actions-group .ghost-btn,
  .topbar-actions-group .add-btn {
      flex-grow: 1; /* Share space */
      min-width: 40px;
      padding: 0.5rem;
      height: 40px;
      font-size: 1rem;
      justify-content: center;
  }
  /* Make "Add Expense" button primary */
  .topbar-actions-group .add-btn {
      flex-grow: 1.2; /* Slightly larger */
  }


  .header-title h1 {
      font-size: 1.5rem;
  }
  
  .home-hero h2 { font-size: 1.8rem; } 
  .home-hero .lead { font-size: 1rem; } 
  .home-hero { padding: 2rem 1rem; }
  .home-guide-box { flex-direction: column; text-align: center; padding: 1.5rem; }
  .hero-actions { flex-direction: column; }
}

/* --- Medium Phone (768px) --- */
@media (max-width:768px){ 
  .form-section{ grid-template-columns:1fr; } 
  .lists-container { grid-template-columns: 1fr; } 
  .charts-container { grid-template-columns: 1fr; } 
  .home-features-grid { grid-template-columns: 1fr; } 

  /* --- Responsive Table (Card View) --- */
  .expenses-table {
      border: 0;
  }
  .expenses-table thead {
      display: none; /* Hide table headers */
  }
  .expenses-table tr {
      display: block;
      margin-bottom: 1rem;
      border-radius: 12px;
      /* NEW: More pronounced shadow */
      box-shadow: 0 4px 12px rgba(0,0,0,0.07);
      background: #fff;
      border: 0;
      overflow: hidden; 
  }
  .expenses-table td {
      display: block;
      text-align: right; 
      font-size: 0.95rem;
      padding: 0.75rem 1rem;
      padding-left: 50%; 
      position: relative;
      border-bottom: 1px solid #f0f0f0;
  }
  .expenses-table td:last-child {
      border-bottom: 0;
  }
  .expenses-table td::before {
      content: attr(data-label);
      position: absolute;
      left: 1rem;
      width: 45%;
      text-align: left;
      /* NEW: Bolder label */
      font-weight: 600;
      color: var(--ink);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
  }
  
  .expenses-table td[data-label="Description"] {
      font-weight: 600;
      color: var(--ink);
  }
  .expenses-table td[data-label="Amount"] {
      font-weight: 700;
      font-size: 1.1rem;
      color: var(--brand);
  }
  .expenses-table td[data-label="Action"] {
      padding-left: 1rem;
      text-align: center;
      background: #fdfdfd;
  }
  .expenses-table td[data-label="Action"]::before {
      display: none; 
  }
  .expenses-table td[data-label="Image"]::before {
      padding-top: 2px;
  }
  .expenses-table td[data-label="Image"] {
      text-align: right;
      padding-top: 12px;
      padding-bottom: 12px;
  }
  .table-img-icon-group {
      justify-content: flex-end; 
  }
}

/* --- Small Phone (480px) --- */
@media (max-width: 480px) {
    .cards-container {
        grid-template-columns: 1fr;
    }
    .home-hero h2 {
        font-size: 1.6rem;
    }
    .home-hero .lead {
        font-size: 0.9rem;
    }
    .modal-dialog {
        width: 95vw;
        margin: 1rem auto;
    }
    .type-box {
        padding: 0.75rem;
    }
    .filter-btn {
        padding: 0.4rem 0.6rem;
        font-size: 0.8rem;
    }
    .btn.btn-lg {
        width: 100%;
    }
    .hero-actions {
        width: 100%;
    }
}